import threading
import os
 
NTHREAD = 10
 
def generate(fp):
 
    for word in iter(fp):
        print(len(word))
 
def parallel_read(fp, threads):
    jobs = []
 
    for x in range(0, threads):
        thread = threading.Thread(target=generate, args=(fp,))
        jobs.append(thread)
 
    for job in jobs:
        job.start()
    for job in jobs:
        job.join()
 
def main():
 
    # Loop till Crash
 
    while True:
 
        filename = 'boom.txt'
 
        with open(filename, 'w') as fp:
            #fp.write('A' * 10000 + 'B' * 10000 + 'C' * 10000 + 'D' * 10000)
            fp.write("A"*100000 + "B" * 100000)
            fp.flush()
 
        with open(filename) as fp:
            parallel_read(fp, NTHREAD)
 
        os.unlink(filename)
 
if __name__ == "__main__":
    main()
